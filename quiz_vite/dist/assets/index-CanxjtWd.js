(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();let p=document.querySelector(".app"),R=document.querySelector(".quiz-area h4"),V=document.querySelector(".title h1"),$=document.querySelector(".info .total"),_=document.querySelector(".options"),E=document.querySelector(".now"),q=document.querySelector(".clear"),b=document.querySelector("button"),L=document.querySelector(".correct .symbol"),v=document.querySelector(".correct .not-lucky"),c=document.querySelector(".msg"),m=0,h=0,w="submit";function P(e){let n=new XMLHttpRequest;n.open("GET",e,!0),n.send(),n.onreadystatechange=function(){if(this.status===200&&this.readyState===4){let r=JSON.parse(this.responseText);B(r)}}}let g=localStorage?.getItem("jsonToObjApp"),C;g!=null&&g!=="undefined"&&(C=JSON.parse(g));g!=null&&g!=="undefined"&&C[0]?.correct&&C[0]?.question&&Object.keys(C[0]?.answers).length>1?B(JSON.parse(g)):P("/quiz_questions_json.json");function N(e){R.innerHTML=e.question;let n=Object.keys(e.answers).length,r=[];for(let t=1;t<=n;t++){document.createElement("div").classList.add("option");let s=document.createElement("input");s.type="radio",s.name="question",s.id=`${t}`;let i=document.createElement("label");i.htmlFor=`${t}`,i.appendChild(document.createTextNode(e.answers[t])),r[t]=[],r[t].push(s),r[t].push(i)}r=r.sort(()=>Math.random()-.5),r.forEach(t=>{let o=document.createElement("div");o.classList.add("option"),_.appendChild(o);let s=t[0],i=t[1];o.appendChild(s),o.appendChild(i)})}function j(){_.innerHTML="",R.innerHTML="",c.innerHTML="",L.innerHTML="",v.innerHTML=""}function G(e,n){w==="submit"&&(b.textContent="Submit answer");let r=document.getElementsByName("question");r=Array.from(r).filter(t=>{if(t.checked===!0)return t.id}),r.length==0?(c.innerHTML="<b>*</b> Please select an answer before submitting your response.",c.style.color="red"):(document.getElementsByName("question").forEach(o=>{o.setAttribute("disabled","")}),w==="submit"&&(w="next",b.textContent="Next Question"),q.removeEventListener("click",T),c.innerHTML="",e===r[0].id?(h++,c.innerHTML='<div class="check-mark"><svg width="64px" height="64px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM16.0303 8.96967C16.3232 9.26256 16.3232 9.73744 16.0303 10.0303L11.0303 15.0303C10.7374 15.3232 10.2626 15.3232 9.96967 15.0303L7.96967 13.0303C7.67678 12.7374 7.67678 12.2626 7.96967 11.9697C8.26256 11.6768 8.73744 11.6768 9.03033 11.9697L10.5 13.4393L12.7348 11.2045L14.9697 8.96967C15.2626 8.67678 15.7374 8.67678 16.0303 8.96967Z" fill="#2fa22f"></path> </g></svg></div> <b>Great job!</b> That’s correct.',c.style.color="green",L.innerHTML="",v.innerHTML=""):e==="0"?(h++,c.innerHTML='<svg class="no-mark" width="64px" height="64px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM12 17.75C12.4142 17.75 12.75 17.4142 12.75 17V11C12.75 10.5858 12.4142 10.25 12 10.25C11.5858 10.25 11.25 10.5858 11.25 11V17C11.25 17.4142 11.5858 17.75 12 17.75ZM12 7C12.5523 7 13 7.44772 13 8C13 8.55228 12.5523 9 12 9C11.4477 9 11 8.55228 11 8C11 7.44772 11.4477 7 12 7Z" fill="cornflowerblue"></path> </g></svg> You did not specify correct answer in your document!',c.style.color="cornflowerblue",L.innerHTML="",v.innerHTML=""):(c.innerHTML='<div class="xmark"><svg fill="#ff0000" height="20px" width="20px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve" stroke="#ff0000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="XMLID_28_"> <path id="XMLID_29_" d="M165,0C120.926,0,79.492,17.163,48.328,48.327c-64.334,64.333-64.334,169.011-0.002,233.345 C79.49,312.837,120.926,330,165,330c44.072,0,85.508-17.163,116.672-48.328c64.334-64.334,64.334-169.012,0-233.345 C250.508,17.163,209.072,0,165,0z M239.246,239.245c-2.93,2.929-6.768,4.394-10.607,4.394c-3.838,0-7.678-1.465-10.605-4.394 L165,186.213l-53.033,53.033c-2.93,2.929-6.768,4.394-10.607,4.394c-3.838,0-7.678-1.465-10.605-4.394 c-5.859-5.857-5.859-15.355,0-21.213L143.787,165l-53.033-53.033c-5.859-5.857-5.859-15.355,0-21.213 c5.857-5.857,15.355-5.857,21.213,0L165,143.787l53.031-53.033c5.857-5.857,15.355-5.857,21.213,0 c5.859,5.857,5.859,15.355,0,21.213L186.213,165l53.033,53.032C245.104,223.89,245.104,233.388,239.246,239.245z"></path> </g> </g></svg></div> <b>Oops</b>, That’s incorrect. The right answer is:',c.style.color="red",L.innerHTML='<div class="check-mark"><svg width="64px" height="64px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM16.0303 8.96967C16.3232 9.26256 16.3232 9.73744 16.0303 10.0303L11.0303 15.0303C10.7374 15.3232 10.2626 15.3232 9.96967 15.0303L7.96967 13.0303C7.67678 12.7374 7.67678 12.2626 7.96967 11.9697C8.26256 11.6768 8.73744 11.6768 9.03033 11.9697L10.5 13.4393L12.7348 11.2045L14.9697 8.96967C15.2626 8.67678 15.7374 8.67678 16.0303 8.96967Z" fill="#2fa22f"></path> </g></svg></div>',v.childNodes.length<1&&v.appendChild(document.createTextNode(n))))}function T(){document.getElementsByName("question").forEach(e=>{e.checked=!1}),c.innerHTML=""}let z=document.querySelector(".add"),F=document.querySelector("dialog");z.onclick=()=>{F.showModal()};function B(e){$.innerHTML=e.length,E.innerHTML=1;let n=Object.values(e).sort(()=>Math.random()-.5);j(),N(n[m]),q.addEventListener("click",T),b.onclick=()=>{if(q.addEventListener("click",T),w==="submit")G(n[m].correct,n[m].answers[n[m].correct]);else if(w==="next")if(m++,m<n.length)j(),N(n[m]),E.innerHTML=m+1,w="submit",b.textContent="Submit answer";else{b.remove(),V.innerHTML="Quiz Finished!",p.innerHTML=`<div class="result">You scored ${h} out of ${n.length}</div`,h===n.length||h>=Math.round(n.length*.8)?p.innerHTML+=`
                <div class="temp">
                    <span>&#x1F600; Excellent! You really know your stuff.</span>
                </div>`:h===0?p.innerHTML+=`
                <div class="temp">
                    <span>&#x1F622; Keep learning! You’ll do better next time.</span>
                </div>`:p.innerHTML+=`
                <div class="temp">
                    <span>&#x1F611; Not bad! A little more practice and you’ll ace it.</span>
                </div>`;let r=document.createElement("button");r.innerHTML="Retry Quiz",p.appendChild(r),p.style.display="flex",p.style.flexDirection="column",p.style.alignItems="center",r.onclick=()=>{location.reload()}}}}let y=document.querySelector(".history"),Q=document.querySelector(".sidebar-icon"),f=document.querySelector(".sidebar-show");const u=document.getElementById("global-menu");document.addEventListener("click",e=>{if(Q.contains(e.target)){y.style.transform="translateX(-100%)",f.style.transform="translate(0)",f.classList.remove("showed"),u.classList.remove("active");return}if(f.contains(e.target)){f.classList.add("showed"),f.style.transform="translateX(-200%)",y.style.transform="translateX(0)";return}!e.target.closest(".options-menu")&&!e.target.closest(".item-svg")&&u.classList.remove("active"),!u.contains(e.target)&&!y.contains(e.target)&&(y.style.transform="translateX(-100%)",f.style.transform="translate(0)",f.classList.remove("showed"))});y.onscroll=()=>{u.classList.remove("active")};const A="QuizHistory",a="QuizHistory",D=1;function k(){return new Promise((e,n)=>{const r=indexedDB.open(A,D);r.onupgradeneeded=t=>{const o=t.target.result;o.objectStoreNames.contains(a)||o.createObjectStore(a,{keyPath:"id",autoIncrement:!0})},r.onsuccess=t=>e(t.target.result),r.onerror=t=>n(t.target.error)})}async function H(){try{const e=await k(),n=e.transaction(a,"readonly"),t=n.objectStore(a).getAll();t.onsuccess=()=>{const s=t.result.reverse();Z(s)},t.onerror=o=>console.error("getAll error:",o.target.error),n.oncomplete=()=>e.close(),n.onerror=o=>{console.error("Transaction error (history):",o.target.error),e.close()}}catch(e){console.error("openDB error (history):",e)}}function Z(e){const n=document.querySelector(".item-pinned"),r=document.querySelector(".item-recent"),t=e.filter(i=>i.pin===!0),o=e.filter(i=>!i.pin),s=i=>`
    <div class="item" data-id="${i.id}">
      <div class="item-text">${J(JSON.parse(i.text)[0].question)}</div>
      <div class="parent_dot">
        <div class="item-svg">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5514 8C4.5514 8.63513 4.03653 9.15 3.4014 9.15C2.76628 9.15 2.2514 8.63513 2.2514 8C2.2514 7.36487 2.76628 6.85 3.4014 6.85C4.03653 6.85 4.5514 7.36487 4.5514 8Z" fill="#000"></path><path d="M9.14754 8C9.14754 8.63513 8.63267 9.15 7.99754 9.15C7.36242 9.15 6.84754 8.63513 6.84754 8C6.84754 7.36487 7.36242 6.85 7.99754 6.85C8.63267 6.85 9.14754 7.36487 9.14754 8Z" fill="#000"></path><path d="M13.7486 8C13.7486 8.63513 13.2337 9.15 12.5986 9.15C11.9634 9.15 11.4486 8.63513 11.4486 8C11.4486 7.36487 11.9634 6.85 12.5986 6.85C13.2337 6.85 13.7486 7.36487 13.7486 8Z" fill="#000"></path></svg>
        </div>
      </div>
    </div>
  `;n.innerHTML=t.map(s).join(""),r.innerHTML=o.map(s).join("")}function J(e){return String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}H();async function I(e){return new Promise((n,r)=>{const t=indexedDB.open(A,D);t.onsuccess=o=>{const l=o.target.result.transaction(a,"readonly").objectStore(a).get(e);l.onsuccess=()=>{l.result&&l.result.text!==""?n(l.result.text):n(null)},l.onerror=()=>r("error in db")}})}document.querySelector(".item-recent");let x=null;y.addEventListener("click",async e=>{const n=e.target.closest(".item-svg"),r=e.target.closest(".item");if(n){e.stopPropagation(),x=r.dataset.id;const t=n.getBoundingClientRect();u.style.top=`${t.bottom-12}px`,u.style.left=`${t.left+20}px`,u.classList.add("active");return}if(r){const t=await I(Number(r.dataset.id));t!=""&&(window.localStorage.setItem("jsonToObjApp",t),location.reload())}});u.addEventListener("click",e=>{e.target.id==="menu-delete-btn"?X(x):e.target.id==="menu-pin-btn"?Y(x):e.target.id==="menu-download-btn"&&U(x),u.classList.remove("active")});function X(e){k().then(n=>{const r=n.transaction(a,"readwrite"),o=r.objectStore(a).delete(Number(e));o.onsuccess=()=>{console.log(`Item ${e} deleted`),H()},o.onerror=s=>console.error("delete error",s.target.error),r.oncomplete=()=>n.close(),r.onerror=s=>{console.error("tx error",s.target.error),n.close()}}).catch(console.error)}async function U(e){const n=await I(Number(e)),r=JSON.stringify(n).replace(/<\/script>/g,"<\\/script>");let t;const o=`
const stored = ${r};stored&&proccess(JSON.parse(stored));
<\/script>
</body>
</html>
`;fetch("./dontDeleteme.txt").then(s=>s.text()).then(s=>{t=`${s}${o}`;const i=new Blob([t],{type:"text/html"}),d=window.URL.createObjectURL(i),l=document.createElement("a");l.style.display="none",l.href=d,l.download="quiz.html",document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(d),document.body.removeChild(l),console.log("downloaded ✔")}).catch(s=>console.error(s))}function Y(e){k().then(n=>{const r=n.transaction(a,"readwrite"),t=r.objectStore(a),o=t.get(Number(e));o.onsuccess=()=>{const s=o.result;if(s){s.pin=!s.pin;const i=t.put(s);i.onsuccess=()=>{console.log("Pin updated..."),H()},i.onerror=d=>console.error("update error",d.target.error)}else console.error("No record with this id:",e)},o.onerror=s=>console.error("get error",s.target.error),r.oncomplete=()=>n.close(),r.onerror=s=>{console.error("tx error",s.target.error),n.close()}}).catch(console.error)}const M=document.getElementById("file"),O=document.querySelector(".mother-of-loading"),K=document.querySelector("dialog"),W="QuizHistory",S="QuizHistory",ee=1;function te(){return new Promise((e,n)=>{const r=indexedDB.open(W,ee);r.onupgradeneeded=t=>{const o=t.target.result;o.objectStoreNames.contains(S)||o.createObjectStore(S,{keyPath:"id",autoIncrement:!0})},r.onsuccess=t=>e(t.target.result),r.onerror=t=>n(t.target.error)})}M.addEventListener("change",async()=>{const e=M.files[0];if(!e)return;K.close(),O.style.display="block";const n=new FormData;n.append("file",e);try{const r=await fetch("/upload",{method:"POST",body:n});if(!r.ok)throw new Error("Upload failed");const t=await r.json();if(console.log("Uploaded:",t),t.content){const o=await te(),s=o.transaction(S,"readwrite"),d=s.objectStore(S).put({text:JSON.stringify(t.content),pin:!1});d.onsuccess=()=>{console.log("Retrieved from DB:",d.result),window.localStorage.setItem("jsonToObjApp",JSON.stringify(t.content)),location.reload()},d.onerror=l=>{console.error("Add error:",l.target.error)},s.oncomplete=()=>{o.close()},s.onerror=l=>{console.error("Transaction error (callFlask):",l.target.error),o.close()}}}catch(r){console.error("openDB error (callFlask):",r)}finally{O.style.display="none",M.value=""}});
